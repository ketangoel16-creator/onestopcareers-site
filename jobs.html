<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>OneStopCareers - Job Board</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="icon" href="https://cdn-icons-png.flaticon.com/512/3135/3135715.png"/>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Manrope:wght@400;700;800&display=swap');
    body { font-family: 'Manrope', sans-serif; background-color: #121212; color: #EAEAEA; }
    .modal { display: none; position: fixed; z-index: 100; left: 0; top: 0; width: 100%; height: 100%; overflow: auto; background-color: rgba(0,0,0,0.7); display: flex; align-items: center; justify-content: center; }
    .modal-content { background-color: #1C1C1C; padding: 24px; border-radius: 12px; width: 90%; max-width: 400px; box-shadow: 0 10px 25px rgba(0,0,0,0.5); border: 1px solid #333; }
    .close-btn { color: #aaa; float: right; font-size: 28px; font-weight: bold; }
    .close-btn:hover, .close-btn:focus { color: #fff; text-decoration: none; cursor: pointer; }
    /* FIXED: This now ensures the grid columns are centered on the page */
    .content-grid { 
      display: grid; 
      grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); 
      gap: 1.5rem; 
      justify-content: center;
    }
  </style>
</head>
<body class="bg-[#121212] text-white">

<main>
    <section id="jobs" class="max-w-7xl mx-auto px-4 py-16">
    <div class="text-center">
      <h1 class="text-4xl md:text-5xl font-extrabold text-white mb-2">Find Your Next Role</h1>
      <p class="text-gray-400 mb-8">Explore curated opportunities from top-tier companies.</p>
    </div>
        <div class="flex flex-col md:flex-row items-center justify-center gap-4 mb-8">
      <input type="text" id="job-search" placeholder="Search by title, company..." class="w-full md:w-1/3 p-3 rounded-lg border border-gray-700 bg-[#1C1C1C] text-white focus:outline-none focus:ring-2 focus:ring-orange-500" />
      <button id="company-filter-btn" class="w-full md:w-auto p-3 rounded-lg border border-gray-700 bg-[#1C1C1C] text-white text-left min-w-[150px]">All Companies</button>
      <button id="location-filter-btn" class="w-full md:w-auto p-3 rounded-lg border border-gray-700 bg-[#1C1C1C] text-white text-left min-w-[150px]">All Locations</button>
    </div>
    
    <div id="job-board-loading" class="content-grid"></div>
        <div id="job-board" class="content-grid" style="display: none;"></div>
    <p id="no-jobs-found" class="text-center text-gray-400 mt-8" style="display: none;">No jobs found matching your criteria.</p>
    <div id="see-more-jobs-container" class="text-center mt-12" style="display: none;">
      <button id="see-more-jobs-btn" class="bg-gray-800 text-gray-300 px-6 py-3 rounded-lg hover:bg-gray-700">See More Jobs</button>
    </div>
  </section>

    <section id="toolkit" class="max-w-7xl mx-auto px-4 py-16">
    <div class="text-center mb-12">
      <h2 class="text-3xl font-extrabold text-white">Your Career Toolkit</h2>
      <p class="text-gray-400">Resources to help you get hired.</p>
    </div>
        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-8">
            <div class="bg-[#1C1C1C] p-8 rounded-xl border border-gray-800 flex flex-col items-center text-center">
        <svg class="w-12 h-12 mb-4 text-blue-400" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m2.25 0H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z" /></svg>
        <h3 class="text-lg font-bold">Resume Templates</h3>
        <p class="text-gray-400 text-sm">ATS-friendly designs</p>
      </div>
            <div class="bg-[#1C1C1C] p-8 rounded-xl border border-gray-800 flex flex-col items-center text-center">
        <svg class="w-12 h-12 mb-4 text-purple-400" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M20.25 8.511c.884.284 1.5 1.128 1.5 2.097v4.286c0 1.136-.847 2.1-1.98 2.193l-3.72 3.72a1.125 1.125 0 01-1.59 0l-3.72-3.72a1.125 1.125 0 01-1.59 0l-3.72 3.72a1.125 1.125 0 01-1.59 0l-3.72-3.72A1.125 1.125 0 01.98 17.086V12.8c0-.97.616-1.813 1.5-2.097l3.72-1.24a1.125 1.125 0 011.59 0l3.72 1.24a1.125 1.125 0 011.59 0l3.72-1.24a1.125 1.125 0 011.59 0l3.72 1.24z" /></svg>
        <h3 class="text-lg font-bold">Interview Prep</h3>
        <p class="text-gray-400 text-sm">STAR method & frameworks</p>
      </div>
            <div class="bg-[#1C1C1C] p-8 rounded-xl border border-gray-800 flex flex-col items-center text-center">
        <svg class="w-12 h-12 mb-4 text-green-400" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M3.75 3v11.25A2.25 2.25 0 006 16.5h12A2.25 2.25 0 0020.25 14.25V3.75M3.75 18.75h16.5M13.5 6.75h3.75m-3.75 3h3.75M3.75 6.75h7.5v7.5h-7.5z" /></svg>
        <h3 class="text-lg font-bold">Salary Guides</h3>
        <p class="text-gray-400 text-sm">Negotiate your worth</p>
      </div>
            <div class="bg-[#1C1C1C] p-8 rounded-xl border border-gray-800 flex flex-col items-center text-center">
        <svg class="w-12 h-12 mb-4 text-emerald-500" viewBox="0 0 24 24" fill="currentColor"><path d="M12.04 2C6.58 2 2.13 6.45 2.13 11.91C2.13 13.66 2.61 15.35 3.5 16.85L2.09 22L7.31 20.5C8.75 21.33 10.36 21.82 12.04 21.82C17.5 21.82 21.95 17.37 21.95 11.91C21.95 9.27 20.92 6.83 19.16 4.99C17.4 3.14 14.89 2 12.04 2M16.56 15.29C16.31 15.81 15.28 16.29 14.93 16.35C14.58 16.41 13.92 16.47 13.41 16.29C12.18 15.96 11.08 15.26 10.21 14.2C9.55 13.39 9.06 12.44 8.86 11.91C8.67 11.38 8.84 11.04 9.04 10.84C9.21 10.67 9.42 10.53 9.6 10.38C9.73 10.27 9.81 10.15 9.92 9.94C10.03 9.73 9.97 9.5 9.85 9.25C9.73 9 9.23 7.73 9.02 7.23C8.81 6.73 8.6 6.8 8.42 6.79C8.24 6.78 8 6.78 7.79 6.78C7.58 6.78 7.29 6.84 7.03 7.11C6.77 7.38 6.15 7.94 6.15 9.15C6.15 10.36 7.06 11.52 7.21 11.71C7.36 11.9 8.71 14.16 10.99 15.09C12.82 15.84 13.25 15.67 13.67 15.62C14.09 15.57 15.12 14.98 15.38 14.39C15.63 13.8 15.63 13.31 15.55 13.2C15.48 13.08 15.26 12.96 15 12.84C14.74 12.72 14.38 12.54 14.12 12.42C13.86 12.3 13.72 12.24 13.56 12.48C13.4 12.72 12.91 13.33 12.75 13.51C12.59 13.69 12.43 13.73 12.21 13.63C11.99 13.53 11.33 13.3 10.53 12.63C9.91 12.12 9.45 11.47 9.29 11.2C9.13 10.93 9.26 10.74 9.41 10.6C9.55 10.47 9.71 10.28 9.86 10.11C10.01 9.94 10.07 9.82 10.15 9.7C10.24 9.58 10.32 9.48 10.28 9.34C10.24 9.2 10.03 8.68 9.92 8.42C9.81 8.16 9.71 8.23 9.6 8.23C9.5 8.23 9.38 8.23 9.27 8.23H9.13C8.94 8.23 8.65 8.29 8.44 8.56C8.23 8.83 7.61 9.39 7.61 10.6C7.61 11.81 8.52 12.96 8.67 13.15C8.82 13.34 10.17 15.6 12.45 16.53C13.35 16.9 14.02 17.06 14.51 17.04C15.11 17.02 16.14 16.43 16.42 15.82C16.69 15.21 16.69 14.72 16.56 14.59C16.56 14.59 16.56 15.29 16.56 15.29Z"/></svg>
        <h3 class="text-lg font-bold">Join our 50K+ Community</h3>
        <p class="text-gray-400 text-sm">Daily alerts & mentorship</p>
      </div>
    </div>
  </section>

    <section id="referrals" class="max-w-7xl mx-auto px-4 py-16">
    <div class="mb-8">
      <h2 class="text-3xl font-extrabold text-white">Referral Network</h2>
      <p class="text-gray-400">Professionals ready to help with referrals.</p>
    </div>
    <div class="mb-8 max-w-md">
      <input type="text" id="referral-search" placeholder="Search by name, company..." class="w-full p-3 rounded-lg border border-gray-700 bg-[#1C1C1C] text-white focus:outline-none focus:ring-2 focus:ring-blue-500" />
    </div>
    <div id="referral-board-loading" class="content-grid"></div>
        <div id="referral-board" class="content-grid" style="display: none;"></div>
    <p id="no-referrals-found" class="text-center text-gray-400 mt-8" style="display: none;">No professionals found matching your search.</p>
    <div id="see-more-referrals-container" class="text-center mt-12" style="display: none;">
      <button id="see-more-referrals-btn" class="bg-gray-800 text-gray-300 px-6 py-3 rounded-lg hover:bg-gray-700">See More Referrals</button>
    </div>
  </section>
</main>

<div id="filter-modal" class="modal">
  <div class="modal-content">
    <div class="flex justify-between items-center mb-4"><h3 id="filter-modal-title" class="text-xl font-bold">Filter</h3><span id="close-modal-btn" class="close-btn">&times;</span></div>
    <div id="filter-options" class="space-y-2 max-h-60 overflow-y-auto"></div>
    <div class="mt-6 flex justify-end gap-4"><button id="apply-filter-btn" class="bg-orange-600 text-white px-4 py-2 rounded-lg hover:bg-orange-700">Apply</button></div>
  </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', () => {
  // All DOM Element selectors
  const DOMElements = {
    jobBoard: document.getElementById('job-board'),
    jobBoardLoading: document.getElementById('job-board-loading'),
    noJobsFound: document.getElementById('no-jobs-found'),
    seeMoreJobsBtn: document.getElementById('see-more-jobs-btn'),
    referralBoard: document.getElementById('referral-board'),
    referralBoardLoading: document.getElementById('referral-board-loading'),
    noReferralsFound: document.getElementById('no-referrals-found'),
    seeMoreReferralsBtn: document.getElementById('see-more-referrals-btn'),
    jobSearchInput: document.getElementById('job-search'),
    companyFilterBtn: document.getElementById('company-filter-btn'),
    locationFilterBtn: document.getElementById('location-filter-btn'),
    referralSearchInput: document.getElementById('referral-search'),
    filterModal: document.getElementById('filter-modal'),
    filterModalTitle: document.getElementById('filter-modal-title'),
    filterOptionsContainer: document.getElementById('filter-options'),
    closeModalBtn: document.getElementById('close-modal-btn'),
    applyFilterBtn: document.getElementById('apply-filter-btn'),
    seeMoreJobsContainer: document.getElementById('see-more-jobs-container'),
    seeMoreReferralsContainer: document.getElementById('see-more-referrals-container'),
  };

  // State variables
  let state = {
    allJobs: [], filteredJobs: [], allReferrals: [], filteredReferrals: [],
    jobsPerPage: 8, referralsPerPage: 8, currentJobPage: 1, currentReferralPage: 1,
    activeJobFilters: { search: '', company: 'All', location: 'All' },
    currentModalFilterType: '',
  };

  const preloadedData = {
    jobs: Array.from({ length: 25 }, (_, i) => ({ id: i + 1, "Job Title": i % 3 === 0 ? `React Developer ${i}`: `Business Analyst ${i}`, Company: i % 2 === 0 ? "Innovate Inc." : "Solutions Co.", Location: i % 4 === 0 ? "Remote" : "New York, NY", Link: "#" })),
    referrals: Array.from({ length: 25 }, (_, i) => ({ id: i + 1, name: `Alex Johnson ${i}`, title: "Engineer", company: i % 2 === 0 ? "DataWorks" : "Innovate Inc.", linkedin: "#" })),
  };

  const updateDisplayLimits = () => {
    state.jobsPerPage = state.referralsPerPage = window.innerWidth < 768 ? 4 : 8;
  };
  
  const createCard = (item, type) => {
    const card = document.createElement('div');
    card.className = 'bg-[#1C1C1C] p-6 rounded-xl border border-gray-800';
    if (type === 'job') {
      card.classList.add('text-center', 'flex', 'flex-col');
      card.innerHTML = `<div class="flex-grow"><h3 class="text-lg font-bold mb-2">${item["Job Title"]}</h3><p class="text-sm text-gray-400 mb-1">${item.Company}</p><p class="text-sm text-gray-500 mb-4">${item.Location}</p></div><a href="${item.Link}" class="mt-auto inline-block bg-orange-600 px-4 py-2 rounded text-white hover:bg-orange-700 transition">Apply</a>`;
    } else {
      const initials = item.name.split(' ').map(n => n[0]).join('');
      card.innerHTML = `<div class="flex items-center mb-4"><div class="w-12 h-12 rounded-full bg-gray-700 flex items-center justify-center mr-4 font-bold text-lg">${initials}</div><div><h3 class="font-bold text-white">${item.name}</h3><p class="text-sm text-gray-400">${item.title} - ${item.company}</p></div></div><div class="flex gap-4 mt-6"><a href="${item.linkedin}" target="_blank" class="w-full text-center bg-blue-600 hover:bg-blue-700 text-white font-semibold py-2 px-4 rounded-lg">Connect</a><button class="w-full bg-gray-700 hover:bg-gray-600 text-gray-300 font-semibold py-2 px-4 rounded-lg">Request</button></div>`;
    }
    return card;
  };

  const applyAndRenderJobs = () => {
    let tempJobs = [...state.allJobs];
    if (state.activeJobFilters.search) {
        const searchTerm = state.activeJobFilters.search.toLowerCase();
        tempJobs = tempJobs.filter(j => j["Job Title"].toLowerCase().includes(searchTerm) || j.Company.toLowerCase().includes(searchTerm));
    }
    if (state.activeJobFilters.company !== 'All') tempJobs = tempJobs.filter(j => j.Company === state.activeJobFilters.company);
    if (state.activeJobFilters.location !== 'All') tempJobs = tempJobs.filter(j => j.Location === state.activeJobFilters.location);
    state.filteredJobs = tempJobs;
    state.currentJobPage = 1;
    DOMElements.jobBoard.innerHTML = '';
    const jobsToShow = state.filteredJobs.slice(0, state.jobsPerPage);
    jobsToShow.forEach(job => DOMElements.jobBoard.appendChild(createCard(job, 'job')));
    DOMElements.noJobsFound.style.display = state.filteredJobs.length === 0 ? 'block' : 'none';
    DOMElements.seeMoreJobsContainer.style.display = state.filteredJobs.length > state.jobsPerPage ? 'block' : 'none';
  };

  const applyAndRenderReferrals = () => {
    const searchTerm = DOMElements.referralSearchInput.value.toLowerCase();
    state.filteredReferrals = state.allReferrals.filter(r => !searchTerm || r.name.toLowerCase().includes(searchTerm) || r.company.toLowerCase().includes(searchTerm));
    state.currentReferralPage = 1;
    DOMElements.referralBoard.innerHTML = '';
    const referralsToShow = state.filteredReferrals.slice(0, state.referralsPerPage);
    referralsToShow.forEach(ref => DOMElements.referralBoard.appendChild(createCard(ref, 'referral')));
    DOMElements.noReferralsFound.style.display = state.filteredReferrals.length === 0 ? 'block' : 'none';
    DOMElements.seeMoreReferralsContainer.style.display = state.filteredReferrals.length > state.referralsPerPage ? 'block' : 'none';
  };
  
  const loadMore = (type) => {
    if (type === 'job') {
      state.currentJobPage++;
      const start = (state.currentJobPage - 1) * state.jobsPerPage;
      const end = start + state.jobsPerPage;
      state.filteredJobs.slice(start, end).forEach(job => DOMElements.jobBoard.appendChild(createCard(job, 'job')));
      if (end >= state.filteredJobs.length) DOMElements.seeMoreJobsContainer.style.display = 'none';
    } else {
      state.currentReferralPage++;
      const start = (state.currentReferralPage - 1) * state.referralsPerPage;
      const end = start + state.referralsPerPage;
      state.filteredReferrals.slice(start, end).forEach(ref => DOMElements.referralBoard.appendChild(createCard(ref, 'referral')));
      if (end >= state.filteredReferrals.length) DOMElements.seeMoreReferralsContainer.style.display = 'none';
    }
  };

  const openFilterModal = (type) => {
    state.currentModalFilterType = type;
    DOMElements.filterModalTitle.textContent = `Filter by ${type.charAt(0).toUpperCase() + type.slice(1)}`;
    const key = type === 'company' ? 'Company' : 'Location';
    const options = ['All', ...new Set(state.allJobs.map(job => job[key]))];
    const currentSelection = state.activeJobFilters[type];
    DOMElements.filterOptionsContainer.innerHTML = options.map(option => `
      <label class="flex items-center space-x-3 p-2 rounded-lg hover:bg-gray-700 cursor-pointer">
        <input type="radio" name="filter-option" value="${option}" class="form-radio h-4 w-4 text-orange-600 bg-gray-800 border-gray-600" ${option === currentSelection ? 'checked' : ''}>
        <span class="text-white">${option}</span>
      </label>`).join('');
    DOMElements.filterModal.style.display = 'flex';
  };
  
  const init = () => {
    updateDisplayLimits();
    // Set up listeners
    DOMElements.jobSearchInput.addEventListener('input', () => { state.activeJobFilters.search = DOMElements.jobSearchInput.value; applyAndRenderJobs(); });
    DOMElements.referralSearchInput.addEventListener('input', applyAndRenderReferrals);
    DOMElements.companyFilterBtn.addEventListener('click', () => openFilterModal('company'));
    DOMElements.locationFilterBtn.addEventListener('click', () => openFilterModal('location'));
    DOMElements.seeMoreJobsBtn.addEventListener('click', () => loadMore('job'));
    DOMElements.seeMoreReferralsBtn.addEventListener('click', () => loadMore('referral'));
    DOMElements.closeModalBtn.addEventListener('click', () => DOMElements.filterModal.style.display = 'none');
    DOMElements.applyFilterBtn.addEventListener('click', () => {
        const selected = document.querySelector('input[name="filter-option"]:checked');
        if (selected) {
            state.activeJobFilters[state.currentModalFilterType] = selected.value;
            (state.currentModalFilterType === 'company' ? DOMElements.companyFilterBtn : DOMElements.locationFilterBtn).textContent = selected.value;
        }
        applyAndRenderJobs();
        DOMElements.filterModal.style.display = 'none';
    });
    window.addEventListener('resize', () => { updateDisplayLimits(); applyAndRenderJobs(); applyAndRenderReferrals(); });

    // Fetch and render initial data
    Promise.all([
        fetch('https://ketangoel16-creator.github.io/onestopcareers-data/jobs.json').catch(() => preloadedData.jobs).then(res => res.json ? res.json() : res),
        fetch('https://ketangoel16-creator.github.io/onestopcareers-data/referrals.json').catch(() => preloadedData.referrals).then(res => res.json ? res.json() : res)
    ]).then(([jobs, referrals]) => {
        state.allJobs = jobs;
        state.allReferrals = referrals;
        DOMElements.jobBoardLoading.style.display = 'none';
        DOMElements.jobBoard.style.display = 'grid';
        DOMElements.referralBoardLoading.style.display = 'none';
        DOMElements.referralBoard.style.display = 'grid';
        applyAndRenderJobs();
        applyAndRenderReferrals();
    }).catch(console.error);
  };

  init();
});
</script>

</body>
</html>
