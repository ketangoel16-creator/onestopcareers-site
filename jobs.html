<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Job Board - Staging</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 text-gray-900">
  <div class="container mx-auto p-6">
    <h1 class="text-3xl font-bold mb-6">Job Board (Staging)</h1>
    <div id="jobsContainer" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"></div>
  </div>

  <script>
    async function fetchJobs() {
      try {
        // Replace with your staging script URL (must point to Staging tab in Apps Script)
        const response = await fetch('YOUR_STAGING_WEB_APP_URL');
        if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);

        const jobs = await response.json();
        displayJobs(jobs);
      } catch (error) {
        console.error('Error fetching jobs:', error);
        document.getElementById('jobsContainer').innerHTML = 
          `<p class="text-red-500">Failed to load jobs. Please try again later.</p>`;
      }
    }

    function displayJobs(jobs) {
      const container = document.getElementById('jobsContainer');
      container.innerHTML = '';

      if (!jobs.length) {
        container.innerHTML = '<p>No jobs available at the moment.</p>';
        return;
      }

      jobs.forEach(job => {
        const jobCard = document.createElement('div');
        jobCard.className = 'bg-white p-4 rounded-lg shadow hover:shadow-lg transition-shadow';

        jobCard.innerHTML = `
          <h2 class="text-xl font-semibold mb-2">${job['Job Title'] || 'Untitled Job'}</h2>
          <p class="text-gray-700 mb-1"><strong>Company:</strong> ${job['Company'] || 'N/A'}</p>
          <p class="text-gray-700 mb-1"><strong>Location:</strong> ${job['Location'] || 'N/A'}</p>
          <p class="text-gray-700 mb-3"><strong>Posted on:</strong> ${job['Date'] || 'N/A'}</p>
          <a href="${job['Apply Link'] || '#'}" 
             target="_blank" 
             class="text-blue-500 hover:underline">Apply Now</a>
        `;

        container.appendChild(jobCard);
      });
    }

    fetchJobs();
  </script>
</body>
</html>
